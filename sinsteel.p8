pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
-- start game --

function _init()
	 map_setup()
	 make_player()
	 make_enemy()
end

function _update()
	movement()
	en_movement()
	ability_switch()
	attack()
end

function _draw()
	cls()
	draw_map()
	draw_player()
	draw_enemy()
	if(p.ability==0) then
		attack()
	end
	
 if(p.ability>0) then
 	draw_knife_throw()
 end
end
-->8
-- code for player --


function make_player()
	p={}
	p.x=21
	p.y=21
	p.sprite=4
	p.ability=0
end

function draw_player()

	local cursprite=p.sprite

	if(btn(0)) cursprite=21
	if(btn(1)) cursprite=20
	if(btn(2)) cursprite=5
	if(btn(3)) cursprite=4
	
	spr(cursprite,p.x*8,p.y*8)
	palt(0,true)
end

function movement()
	newx=p.x
	newy=p.y
	
	if(btnp(⬅️)) newx-=1
	if(btnp(➡️)) newx+=1
	if(btnp(⬆️)) newy-=1
	if(btnp(⬇️)) newy+=1
	
	if (can_move(newx,newy)) then
		p.x=mid(0,newx,127)
		p.y=mid(0,newy,63)
	else
	 sfx(0)
	end
end --end movement

function ability_switch()
	if(btnp(🅾️)) then
	 p.ability+=1
	end
end

function attack()
	if(btnp(❎)) then
	 attack_anim()
	end	
end

function attack_anim()
	at={}
	at.x=p.x-2
	at.y=p.y-2
	at.width=5
	at.height=4
	at.sprite=66
	spr(at.sprite,at.x*8,at.y*8,at.width,at.height)
end

function draw_knife_throw()
	spr(37,p.x,p.y)
end
-->8
--map code--

function map_setup()
	--map tiles

end

function draw_map()
 mapx=flr(p.x/16)*16
 mapy=flr(p.y/16)*16
 camera(mapx*8,mapy*8)
 
	map(0,0,0,0,128,64)--
end

function is_tile(tyle_type,x,y)
	tile=mget(x,y)
	has_flag=fget(tile,tile_type)
	return has_flag
end

function can_move(x,y)
	return not is_tile(wall,x,y)
end


-->8
--enemies--

function make_enemy()
	e={}
	e.x=30
	e.y=21
	e.sprite=6
end

function draw_enemy()
	spr(e.sprite,e.x*8,e.y*8)
end

function en_movement()
	enx=e.x
	eny=e.y
	
	if(e.x>p.x+4) enx-=0.2 --posx
	if(e.x<p.x+4) enx+=0.2
	
	if(e.y>p.y+4) eny-=0.2 --posy
	if(e.y<p.y+4) eny+=0.2
	
	if (can_move(newx,newy)) then
		e.x=mid(0,enx,127)
		e.y=mid(0,eny,63)
	end

end --end en_movement
__gfx__
00000000000000000000000000000000000880000008800000060000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000088888800000000008888000088880000666000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000888888888800000008bfb000088888006c6c600000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000007888888888780000008fff000088888006fff600000000000000000000000000000000000000000000000000000000000000000000000000
000770000000000078888888878700000085650000888880005f5000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000008788888448880000065666560658888606666600000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000088888884ff88800000085050000050880f05650f0000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000008888884ffff888000000606000006068000505000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000008888884ff5f888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000888800fff00f88000000888000008880000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000888060fff0608800000088b00000b880000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000088887bfffb7f800000008ff00000ff80000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000880fffff5f080000008850000000588000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000008840000000400000008865000005688000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000084485f584400000008050000000508000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000848655568480000080060000000600800000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000886665656880000000660000066000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000008866fff55f688000000660000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000880f6ff5ff088000000550000006600000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000008806556556088000005555000006600000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000f05050f000000000660000006600000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000060600000000000660000055550000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000060600000000000060000005500000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000050500000000000000000006600000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000005000066000050000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000655666666666655600000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000655666000066655600000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000005000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000333333333b33333300000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000333333333bb3333300000000000000000000000000000000000000000000000000000000
00000000000000000000000066500000000000000000000000000000333333333bbb33bb00000000000000000000000000000000000000000000000000000000
0000000000000000000000066500000000000000000000065000000033333333333b3bb300000000000000000000000000000000000000000000000000000000
0000000000000000000000665000000000000000000000066500000033333333bb3b3b3300000000000000000000000000000000000000000000000000000000
00000000000000000000066500000000000000000000000066500000333333333b3bbb3300000000000000000000000000000000000000000000000000000000
00000000000000000000065000000000000000000000000006650000333333333bb3bb3300000000000000000000000000000000000000000000000000000000
000000000000000000006650000000000000000000000000000600003333333333bbbb3300000000000000000000000000000000000000000000000000000000
00000000000000000000650000000000000000000000000000065000444444483333333300000000000000000000000000000000000000000000000000000000
00000000000000000000650000000000000000000000000000065000488888843333333300000000000000000000000000000000000000000000000000000000
0000000000000000000660000000000000000000000000000006650085555555b333333300000000000000000000000000000000000000000000000000000000
0000000000000000006650000000000000000000000000000000650055885555b3333bb300000000000000000000000000000000000000000000000000000000
0000000000000000006500000000000000000000000000000000665088488884bb333b3300000000000000000000000000000000000000000000000000000000
00000000000000000065000000000000000000000000000000000650444444483bb33b3300000000000000000000000000000000000000000000000000000000
00000000000000000065000000000000000000000000000000000650555555553333333300000000000000000000000000000000000000000000000000000000
00000000000000000065000000000000000000000000000000000650588888883333333300000000000000000000000000000000000000000000000000000000
00000000000000000065000000000000000000000000000000000650000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000065000000000000000000000000000000000650000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000065000000000000000000000000000000000650000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000065000000000000000000000000000000000650000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000065000000000000000000000000000000006650000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000006500000000000000000000000000000006500000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000006500000000000000000000000000000066500000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000006650000000000000000000000000000065000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000650000000000000000000000000000665000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000665000000000000000000000000000650000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000065000000000000000000000000000650000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000006500000000000000000000000066600000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000650000000000000000000000065000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000066000000000000000000000650000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000075757500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
4747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747475747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474747574747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747475747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747574747474747474747474847474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474757474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474747474747474747474747575757575757575747474747474747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474757474747474747474857575757575757474747474747475757574747474747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474747475757474747474747474747474747474747575747474747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474747575747474747484747474747474747474747475757474747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474747574747474747474747475747474747474747474757574747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474847474757474757574747474847474747474747474747484747474747574747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474757474747474747474747474747474747474747474747575747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474757475747474747474747474747474747474747474747475747474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474757474847474747475747484747474747474747484747475757474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474847474747474757474847474747474747474747474747474747474747474757474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474748474747474757474747474747474747474747474747474747474747474757474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474757474747484747474747474747474747484747474748474757574747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474757474747474747474747474747474747474757474747474747574747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474748474757474747474847474747474747474747474747474747474747574747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747475747474747484757474747474747474747474747474747474747474747474747574747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747475757474747474747474747484747474747474747474747474747574747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747475748484747474747474747474747475747474747474747474747574747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747475747474747474747474747474747474747474747474747474747574747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747475757474747474747474747474747474747474747474747474747574747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474757574747474747474747474757575747474747474747474757574747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4747474747474747474747575747474747474747474747474747474747474747474757474747474747474747474747474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
00040000000000c050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
